# é…ç½®åç§°: QuantumultX é…ç½®
# é…ç½®ä½œè€…: Jahvlen
# æ›´æ–°æ—¶é—´: 25-07-02 00:00


[general]

# é…ç½®æ–‡ä»¶å›¾æ ‡
;profile_img_url =http://www.example.com/example.png

# ğŸ‘ğŸ‘ğŸ‘èµ„æºè§£æå™¨ï¼Œè‡ªå®šä¹‰å„ç±»è¿œç¨‹èµ„æºçš„è½¬æ¢ï¼Œå¦‚èŠ‚ç‚¹ï¼Œè§„åˆ™ filterï¼Œå¤å†™ rewrite ç­‰ï¼Œurl åœ°å€
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
;resource_parser_url=resource-parser.js

# ç›´è¿ç½‘ç»œæµ‹è¯•
;network_check_url =http://bing.com

# èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•ï¼Œç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§ï¼Œå¯ä»¥åœ¨ server_local/remote ä¸­ï¼Œä¸ºèŠ‚ç‚¹ã€è®¢é˜…å•ç‹¬æŒ‡å®šserver_check_urlå‚æ•°
;server_check_url =http://www.google.com/generate_204

# æŒ‡å®šæœåŠ¡å™¨æµ‹è¯•æ—¶æ‰€ä½¿ç”¨çš„ User-Agent
;server_check_user_agent = Agent/1.0

# èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•è¶…æ—¶
server_check_timeout = 5000

# æŒ‡å®š DoH è¯·æ±‚æ‰€ä½¿ç”¨çš„ User-Agent
;doh_user_agent = Agent/1.0

# ğŸ‘ğŸ‘èŠ‚ç‚¹åœ°ç†ä½ç½®å±•ç¤º
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js

# ğŸ‘ğŸ‘ğŸ‘è¿è¡Œæ¨¡å¼æ¨¡å—ï¼Œå³æ ¹æ®ç½‘ç»œè‡ªåŠ¨åˆ‡æ¢ åˆ†æµ/ç›´è¿/å…¨å±€ä»£ç† ç­‰æ¨¡å¼ã€‚rewrite/task æ¨¡å—å§‹ç»ˆä¼šç”Ÿæ•ˆï¼Œæ¯” ssid ç­–ç•¥ç»„è®¾ç½®ç®€å•ï¼Œæ¯” ssid-suspend æ›´çµæ´»ã€‚
# å‰ä¸¤ä¸ª filter å…ˆåè¡¨ç¤º åœ¨ [æ•°æ®èœ‚çªç½‘ç»œ] è·Ÿ [ä¸€èˆ¬ Wi-Fi] ä¸‹ï¼Œèµ° filter(åˆ†æµ)æ¨¡å¼ï¼Œåé¢åˆ™è¡¨ç¤ºåœ¨ asus-5g ä¸‹åˆ‡æ¢ä¸ºå…¨å±€ç›´è¿[all_direct]ï¼Œasus åˆ‡æ¢ä¸ºå…¨å±€ä»£ç†[all_proxy]å¦‚éœ€ä½¿ç”¨ï¼Œç›¸åº” SSID æ¢æˆä½ è‡ªå·± Wi-Fi åå³å¯
;running_mode_trigger=filter, filter, asus-5g:all_direct, asus:all_proxy

# ä¸‹é¢åŸŸåå°†ä¸ä½¿ç”¨fake-ipæ–¹å¼. å…¶å®ƒåŸŸååˆ™å…¨éƒ¨é‡‡ç”¨fake-ipåŠè¿œç¨‹è§£æçš„æ¨¡å¼
dns_exclusion_list = *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me

# é»˜è®¤å½“DNSå±‚é¢æŸdomainè¢«rejectæ—¶ï¼Œå°†è¿”å›loopback IPã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‚æ•°ä¿®æ”¹æˆä¸º â€œno-error-no-answerâ€ï¼Œæˆ–è€… â€œnxdomainâ€
;dns_reject_domain_behavior = loopback

# åœ¨ç‰¹å®šWi-Fiä¸‹æš‚åœå·¥ä½œ(ä»…taskæ¨¡å—ä¼šç»§ç»­å·¥ä½œ)ï¼Œå¤šä¸ªWi-Fiç”¨â€œ,â€è¿æ¥ï¼Œå¢å¼ºå…¼å®¹æ€§æ¨¡å¼
;ssid_suspended_list=Asus, Shawn-Wifi
;enhanced_compatibility_ssid_list = LINK_22E174, LINK_22E175

# UDP ç™½åå•ï¼Œç•™ç©ºåˆ™é»˜è®¤æ‰€æœ‰ä¸ºç«¯å£ï¼Œä¸åœ¨åˆ—è¡¨çš„ç«¯å£å°†è¢«ä¸¢å¼ƒï¼ˆè¿”å› ICMP â€œç«¯å£ä¸å¯è¾¾â€ ä¿¡æ¯ï¼‰
# UDP Dropåå•ï¼ŒåŒç™½åå•ç±»ä¼¼ï¼Œä½†ä¸ä¼šè¿”å› ICMP â€œç«¯å£ä¸å¯è¾¾â€ ä¿¡æ¯ï¼Œdrop åå•ä»…å¤„ç† whiteliståå•ä¸­çš„ç«¯å£
# ä»…æ”¯æŒæœ«ç«¯ç­–ç•¥ï¼ˆæœ«ç«¯ç­–ç•¥ä¸ºç»ç”±è§„åˆ™æ¨¡å—å’Œç­–ç•¥æ¨¡å—åæ‰€å‘½ä¸­çš„ç­–ç•¥ï¼Œä¾‹å¦‚ï¼šdirectã€reject ä»¥åŠèŠ‚ç‚¹ï¼›ä¸æ”¯æŒå†…ç½®ç­–ç•¥ proxy ä»¥åŠå…¶å®ƒè‡ªå®šä¹‰ç­–ç•¥ï¼‰
;udp_whitelist=53, 80-427, 444-65535
;udp_drop_list = 1900, 80
fallback_udp_policy=direct

# ä¸‹åˆ—è¡¨ä¸­çš„å†…å®¹å°†ä¸ç»è¿‡ QuantumultXçš„å¤„ç†ï¼Œè®¾ç½®åå»ºè®®é‡å¯è®¾å¤‡
;excluded_routes= 192.168.0.0/16, 172.16.0.0/12, 100.64.0.0/10, 10.0.0.0/8
;icmp_auto_reply=true


[dns]

# ä¸Šæ¸¸ DNS æŸ¥è¯¢ç»“æœè§„é¿
# 1ã€å½“å¹¶å‘å‘å¤šä¸ªä¸Šæ¸¸ DNS æŸ¥è¯¢æ—¶ï¼Œå¦‚å“åº”æœ€å¿«çš„ä¸Šæ¸¸ DNS æŠ¢ç­”çš„ç»“æœå‘½ä¸­äº†è¯¥æ¡ç›®ï¼Œåˆ™ Quantumult X Tunnel DNS æ¨¡å—ä¼šç­‰å¾…å…¶ä»– DNS æœåŠ¡å™¨çš„å“åº”ç»“æœï¼ˆå¦‚æŠ¢ç­”çš„ç»“æœä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸å±äºè¯¥æ¡ç›®ï¼Œåˆ™ä¸ä¼šç­‰å¾…å…¶ä»– DNS çš„å“åº”ï¼Œæ­¤æ—¶æœ‰æ•ˆç»“æœé‡‡ç”¨ä¸å±äºè¯¥æ¡ç›®çš„æ‰€æœ‰è®°å½•ï¼‰
# 2ã€å¦‚æ‰€æœ‰ä¸Šæ¸¸ DNS è¿”å›çš„æ‰€æœ‰ç»“æœå‡å‘½ä¸­è¯¥æ¡ç›®ï¼Œåˆ™åˆ¤å®šä¸º DNS æŸ¥è¯¢å¤±è´¥
# 3ã€å¦‚é…ç½®çš„ä¸Šæ¸¸ DNS åŒ…å«æœ‰å»å¹¿å‘ŠåŠŸèƒ½çš„ DNS æœåŠ¡å™¨ï¼Œè¯·å‹¿ä½¿ç”¨è¯¥å‚æ•°
;circumvent-ipv4-answer = 127.0.0.1, 0.0.0.0
;circumvent-ipv6-answer = ::

# å¦‚éœ€ä½¿ç”¨ DoH3ï¼ŒDNS over HTTP/3ï¼Œè¯·å¼€å¯ä¸‹é¢ğŸ‘‡å‚æ•°
;prefer-doh3

# ç¦ç”¨ç³»ç»Ÿ DNS ä»¥åŠ ipv6
;no-system
no-ipv6

;æŒ‡å®š dns æœåŠ¡å™¨ï¼Œå¹¶å‘å“åº”é€‰å–æœ€ä¼˜ç»“æœ
# 114 DNS - è€ç‰Œå…¬å…± DNS æœåŠ¡ï¼Œç¨³å®šæ€§å¥½ï¼Œå›½å†…è®¿é—®é€Ÿåº¦å¿«
server=114.114.114.114
# ä¸­å›½ç§»åŠ¨ DNS - ç§»åŠ¨ç½‘ç»œä¸‹è§£æé€Ÿåº¦ä¼˜å¼‚ï¼ŒCDN è°ƒåº¦ç²¾å‡†
server=202.141.176.93
# ä¸­å›½ç§»åŠ¨ DNS - ç§»åŠ¨ç½‘ç»œå¤‡ç”¨æœåŠ¡å™¨ï¼Œæä¾›å†—ä½™ä¿éšœ 
server=202.141.178.13
# ä¸Šæµ·ç”µä¿¡ DNS - ç”µä¿¡ç½‘ç»œä¼˜åŒ–ï¼Œåä¸œåœ°åŒºè¡¨ç°çªå‡º
server=117.50.10.10
# é˜¿é‡Œäº‘ DNS - é˜¿é‡Œå·´å·´å…¬å…± DNSï¼Œå…¨å›½è¦†ç›–ï¼ŒæŠ—æ±¡æŸ“èƒ½åŠ›å¼º
server=223.5.5.5
# è…¾è®¯ DNS - è…¾è®¯å…¬å…± DNSï¼Œæ¸¸æˆå’Œç¤¾äº¤åº”ç”¨ä¼˜åŒ–ï¼Œæ˜¾å¼æŒ‡å®š53ç«¯å£
server=119.29.29.29:53
# è…¾è®¯ DNS - è…¾è®¯å¤‡ç”¨æœåŠ¡å™¨ï¼Œä¸ä¸»æœåŠ¡å™¨å½¢æˆè´Ÿè½½å‡è¡¡
server=119.28.28.28
# Google DNS - å…¨çƒçŸ¥åå…¬å…± DNSï¼Œç¨³å®šæ€§é«˜ï¼Œå…¨çƒè¦†ç›– 
;server = 8.8.8.8

;å¦‚æŒ‡å®š DoH æœåŠ¡ï¼Œåˆ™ğŸ‘†ï¸ä¸Šé¢çš„ä¸€èˆ¬ dns è§£æå‡å¤±æ•ˆ é¢å¤–å‚æ•°ï¼Œåœ¨ç‰¹å®šç½‘ç»œä¸‹ç¦ç”¨è¯¥ doh
;doh-server = https://dns.alidns.com/dns-query
;doh-server = https://exmaple1.com/dns-query, https://exmaple2.com/dns-query
;doh-server = https://223.6.6.6/dns-query, excluded_ssids=SSID1
;doh-server = https://223.5.5.5/dns-query, included_ssids=SSID2

;å¦‚æŒ‡å®šäº† DoQ æœåŠ¡ï¼Œåˆ™ DoH ä»¥åŠå…¶å®ƒ dnsè§£æå‡å¤±æ•ˆ
;doq-server = quic://dns.adguard.com
;doq-server = quic://dns1.example.com, quic://dns2.example.com
;doq-server = quic://dns.adguard.com, excluded_ssids=SSID1
;doq-server = quic://dns.adguard.com, included_ssids=SSID2

# æŒ‡å®šåŸŸåè§£ædns, åŒæ ·æ”¯æŒ excluded_ssids/included_ssids å‚æ•°
# è…¾è®¯äº‘ DNS
server=/*icloud.com/119.29.29.29
server=/*icloud.com.cn/119.29.29.29
server=/*tencent.com/119.29.29.29
server=/*weixin.com/119.29.29.29
;server = 8.8.8.8:53, excluded_ssids=SSID1
;server = 8.8.4.4:53, included_ssids=SSID2
;server = /example0.com/system
;server = /example1.com/8.8.4.4
;server = /*.example2.com/223.5.5.5
;doh-server = /*.example3.com/https://doh.pub/dns-query, excluded_ssids=SSID2
;doq-server = /*.example4.com/quic://dns.adguard.com, excluded_ssids=SSID3
;address = /example5.com/192.168.16.18
;address = /example6.com/[2001:8d3:8d3:8d3:8d3:8d3:8d3:8d3]
# æ˜ å°„åŸŸååˆ°å…¶å®ƒåŸŸåçš„ç±»å‹
;alias = /example7.com/another-example.com


[policy]

# img-url å‚æ•°ç”¨äºæŒ‡å®šç­–ç•¥ç»„å›¾æ ‡ï¼Œå¯è¿œç¨‹ï¼Œä¹Ÿå¯æœ¬åœ°/iCloud(Quantumult X/Imagesè·¯å¾„ä¸‹) ï¼ˆ108*108 å¤§å°ï¼‰
# direct/proxy/reject åˆ™åªèƒ½ç”¨æœ¬åœ°å›¾æ ‡ï¼Œåå­—åˆ†åˆ«ä¸º direct.png, proxy.png,reject.png æ”¾ç½®äº Images æ–‡ä»¶å¤¹ä¸‹å³å¯ç”Ÿæ•ˆ (108*108 å¤§å°)
static=ChatGPT, proxy, ç¾å›½, è‹±å›½, æ–°åŠ å¡, æ—¥æœ¬, å°æ¹¾, é¦™æ¸¯, direct, img-url=ChatGPT.png
static=Telegram, proxy, ç¾å›½, è‹±å›½, æ–°åŠ å¡, æ—¥æœ¬, å°æ¹¾, é¦™æ¸¯, direct, img-url=Telegram.png
static=ğŸŒ å›½å¤–ç½‘ç«™, proxy, ç¾å›½, è‹±å›½, æ–°åŠ å¡, æ—¥æœ¬, å°æ¹¾, é¦™æ¸¯, direct, img-url=Global.png
static=ğŸ•¹ ç»ˆææ¸…å•, proxy, ç¾å›½, è‹±å›½, æ–°åŠ å¡, æ—¥æœ¬, å°æ¹¾, é¦™æ¸¯, direct, img-url=shoubing.png
static=ç¾å›½, server-tag-regex=ç¾å›½|ğŸ‡ºğŸ‡¸|US|(?i)UnitedStates, img-url=United States.png
static=è‹±å›½, server-tag-regex=è‹±å›½|ğŸ‡¬ğŸ‡§|UK|(?i)UnitedKingdom, img-url=United Kingdom.png
static=æ–°åŠ å¡, server-tag-regex=æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore, img-url=Singapore.png
static=æ—¥æœ¬, server-tag-regex=æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|(?i)Japan, img-url=Japan.png
static=å°æ¹¾, server-tag-regex=å°æ¹¾|ğŸ‡¹ğŸ‡¼|TW|(?i)Taiwan, img-url=Taiwan.png
static=é¦™æ¸¯, server-tag-regex=é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)HongKong, img-url=Hong Kong.png
# 1ï¼Œstaticï¼šé™æ€ï¼Œæ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹/ç­–ç•¥ç»„ã€‚å¯ä»¥åµŒå¥—å…¶å®ƒæ‰€æœ‰ç±»å‹çš„ç­–ç•¥ç»„
# 2ï¼Œavailableï¼šå¯ç”¨ï¼Œè‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ï¼Œå½“ç­–ç•¥è¢«è§¦å‘ä¸”ç­–ç•¥ç»“æœä¸å¯ç”¨æ—¶ï¼Œå°†ç«‹å³å¯åŠ¨å¹¶å‘urlå»¶è¿Ÿæµ‹è¯•ï¼Œåªèƒ½å¥—ç”¨èŠ‚ç‚¹
# 3ï¼Œround-robin ï¼šè½®è¯¢ç­–ç•¥ï¼ŒæŒ‰ç½‘ç»œè¯·æ±‚è½®æµä½¿ç”¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œåªèƒ½å¥—ç”¨èŠ‚ç‚¹
# 4ï¼Œdest-hashï¼šéšæœºè´Ÿè½½å‡è¡¡ï¼Œä½†ç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹ï¼Œåªèƒ½ç›´æ¥å¥—ç”¨èŠ‚ç‚¹
# 5ï¼Œurl-latency-benchmarkï¼šæœ€ä½å»¶è¿Ÿï¼Œé€‰å–å»¶è¿Ÿæœ€ä¼˜èŠ‚ç‚¹ï¼ˆè¯¯åŒºï¼šå»¶è¿Ÿæœ€ä½ä¸ä¸€å®šé€Ÿåº¦æœ€å¿«ï¼‰ï¼Œè¯¥ç±»å‹çš„ç­–ç•¥æœ‰ä¸€ä¸ªåä¸º check-interval(ç§’) çš„å‚æ•°ï¼Œå¦‚æœæ­¤ç­–ç•¥å·²ç»è¢«ä»»ä½•è¯·æ±‚æ¿€æ´»ï¼Œåˆ™å°†è€ƒè™‘è¯¥é—´éš”ã€‚
# 6ï¼Œssidï¼šå°†æ ¹æ®ä½ æ‰€è®¾å®šçš„ç½‘ç»œæ¥è‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹/ç­–ç•¥ç»„

# ssidç­–ç•¥ç»„åªèƒ½åœ¨é…ç½®æ–‡ä»¶å†™å…¥ï¼›é€šå¸¸æ˜¯åœ¨ä½¿ç”¨è½¯è·¯ç”±æ—¶ï¼Œè®©QXèµ°ç›´è¿ï¼Œè½¯è·¯ç”±æ¥ç®¡ä»£ç†ã€‚æ­¤æ—¶å¯ä»¥è®©å»å¹¿å‘Šè§„åˆ™ä¾æ—§ä¿æŒrejectï¼Œé¿å…å¤±æ•ˆã€‚
# å¤„äºèœ‚çªæ•°æ®æ—¶ï¼Œèµ°ç­–ç•¥ç»„1;
# å¤„äºéWi-Fi-1æˆ–Wi-Fi-2æ—¶ï¼Œä¼šèµ° ç­–ç•¥ç»„2 
# å¤„äºâ Wi-Fi-1æˆ–Wi-Fi-2æ—¶ï¼Œèµ°æŒ‡å®šçš„ç­–ç•¥ï¼Œå¯ä»¥æ˜¯ directã€proxyã€reject æˆ– ç­–ç•¥ç»„ï¼Œæ­¤å¤„éœ€è‡³å°‘æœ‰ä¸€ä¸ªWi-Fiå‚æ•°ã€‚
; ssid = SSID, ç­–ç•¥ç»„1, ç­–ç•¥ç»„2, Wi-Fi-1:Proxy, Wi-Fi-2:direct


[server_remote]

# å¯ç›´æ¥è®¢é˜…SSRï¼ŒSSé“¾æ¥ï¼Œä»¥åŠQuantumult Xæ ¼å¼çš„vmess/trojan/httpsè®¢é˜…ï¼Œå…¶å®ƒæ ¼å¼å¯ç”¨ opt-parser å¼€å¯è§£æå™¨å¯¼å…¥ä½¿ç”¨

# img-urlå‚æ•°ç”¨äºæŒ‡å®šå›¾æ ‡ï¼Œæ ¼å¼è¦æ±‚åŒæ ·ä¸º 108*108 çš„ png å›¾ç‰‡ï¼Œå¯è¿œç¨‹ï¼Œå¯æœ¬åœ°
# "tag" è¡¨ç¤º â€œæ ‡ç­¾â€ï¼Œ"enabled" è¡¨ç¤ºâ€œå¼€å¯çŠ¶æ€â€, true ä¸ºå¼€å¯ï¼Œfalse å…³é—­.
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’, é»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60=86400 ç§’ï¼Œä¹Ÿå°±æ˜¯24å°æ—¶.
# opt-parser=true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹æœ¬è®¢é˜… å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨;

; è®¢é˜…é“¾æ¥

#æ”¯æŒæœ¬åœ°/iCloudçš„èŠ‚ç‚¹æ–‡ä»¶/ç‰‡æ®µï¼Œä½äºQuantumult X/Profilesè·¯å¾„ä¸‹
;servers.snippet, tag=æœ¬åœ°æœåŠ¡å™¨, enabled=false


[filter_remote]

#è¿œç¨‹åˆ†æµæ¨¡å—ï¼Œå¯ä½¿ç”¨force-policyæ¥å¼ºåˆ¶ä½¿ç”¨ç­–ç•¥åå¥½, æ›¿æ¢è¿œç¨‹è§„åˆ™å†…æ‰€æŒ‡å®šçš„ç­–ç•¥ç»„

# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’, é»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60=86400 ç§’ï¼Œä¹Ÿå°±æ˜¯24å°æ—¶.
# opt-parser=true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹æœ¬è®¢é˜… å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨;

# å»å¹¿å‘Š
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Advertising.list, tag=ğŸš¦å»å¹¿å‘Š, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
# ååŠ«æŒ
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Hijacking/Hijacking.list, tag=ğŸš« è¿è¥å•†åŠ«æŒ, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true
# Appleç›´è¿
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=ï£¿ AppleæœåŠ¡, force-policy=direct, update-interval=172800, opt-parser=false, enabled=true


# OpenAi
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OpenAI/OpenAI.list, tag=ğŸ’» ChatGPT, force-policy=ChatGPT, update-interval=172800, opt-parser=false, enabled=true
# Telegram
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=172800, opt-parser=false, enabled=true
# å›½å¤–ç½‘ç«™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Global/Global.list, tag=ğŸŒ å›½å¤–ç½‘ç«™, force-policy=ğŸŒ å›½å¤–ç½‘ç«™, update-interval=172800, opt-parser=false, enabled=true


# å›½å†…IPæ± 
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaIPs/ChinaIPs.list, tag=ğŸ‡¨ğŸ‡³ï¸ å›½å†…IPæ± , force-policy=direct, update-interval=172800, opt-parser=false, enabled=true

# é»˜è®¤
;FILTER_LAN, tag=LAN, force-policy=direct, enabled=true
FILTER_REGION, tag=CN, force-policy=direct, enabled=true

#æ”¯æŒæœ¬åœ°/iCloudè§„åˆ™æ–‡ä»¶ï¼Œä½äºQuantumult X/Profilesè·¯å¾„ä¸‹
;filter.txt, tag=æœ¬åœ°åˆ†æµ, enabled=false


[rewrite_remote]

#è¿œç¨‹å¤å†™æ¨¡å—ï¼Œå†…åŒ…å«ä¸»æœºåhostnameä»¥åŠå¤å†™rewriteè§„åˆ™
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’, é»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60=86400 ç§’ï¼Œä¹Ÿå°±æ˜¯24å°æ—¶.
# opt-parser=true/false ç”¨äºæ§åˆ¶æ˜¯å¦å¯¹æœ¬è®¢é˜… å¼€å¯èµ„æºè§£æå™¨ï¼Œä¸å†™æˆ–è€… false è¡¨ç¤ºä¸å¯ç”¨è§£æå™¨;
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/AdvertisingLite/AdvertisingLite.conf, tag=å»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/YoutubeAds.conf, tag=Youtubeå»å¹¿å‘Š, update-interval=172800, opt-parser=true, enabled=true


#æ”¯æŒæœ¬åœ°/iCloudçš„å¤å†™è§„åˆ™æ–‡ä»¶ï¼Œä½äºQuantumult X/Profilesè·¯å¾„ä¸‹
;rewrite.txt, tag=æœ¬åœ°å¤å†™, opt-parser=false, enabled=false

[server_local]
# ä»¥ä¸‹ç¤ºèŒƒéƒ½æ˜¯ ip(åŸŸå):ç«¯å£ï¼Œ
# æ¯”å¦‚ vmess-a.203.167.55.4:777 ï¼Œå®é™…æ˜¯ 203.167.55.4:777
# å‰é¢çš„ ss-aï¼Œws-tlsè¿™äº›ï¼Œåªæ˜¯ä¸ºäº†è®©ä½ å¿«é€Ÿæ‰¾åˆ°è‡ªå·±èŠ‚ç‚¹çš„ç±»å‹
# å®é™…ä½¿ç”¨æ—¶ï¼Œè¯·ä¸è¦çœŸçš„ å‚»ä¹ä¹çš„ å†™ vmess-a.203.167.55.4:777 è¿™ç§ã€‚
# ç›®å‰æ”¯æŒ shadowsocks/shadowsocksR/Vmess/Trojan/http(s)/Socks5 ç­‰ç±»å‹
# æ”¯æŒ tls-cert-sha256 ä»¥åŠ tls-pubkey-sha256 å‚æ•°ç­‰è‡ªå®šä¹‰TLSéªŒè¯

# shadowsocksä»¥åŠshadowsocksRç±»å‹, æ”¯æŒ V2-Plugin
# æ”¯æŒUDPï¼Œæ”¯æŒUDP-OVER-TCPï¼ˆç‰ˆæœ¬1.0.29 665+ï¼‰
;shadowsocks=ss-a.example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, server_check_url=http://www.apple.com/generate_204, tag=Sample-A
;shadowsocks=ss-b.example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, tag=Sample-B
;shadowsocks=ss-c.example.com:443, method=chacha20, password=pwd, obfs=tls, obfs-host=bing.com, fast-open=false, udp-relay=false, tag=Sample-C
;shadowsocks=ssr-a.example.com:443, method=chacha20, password=pwd, ssr-protocol=auth_chain_b, ssr-protocol-param=def, obfs=tls1.2_ticket_fastauth, obfs-host=bing.com, tag=Sample-D
;shadowsocks=ws-a.example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=Sample-E
;shadowsocks=ws-b.example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, fast-open=false, udp-relay=false, tag=Sample-F
;shadowsocks=ws-tls-a.example.com:443, method=aes-128-gcm, password=pwd, obfs=wss, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=Sample-G
;shadowsocks=ws-tls-a.example.com:443, method=aes-128-gcm, password=pwd, udp-over-tcp=true fast-open=false, udp-relay=false, tag=Sample-H

# vmess ç±»å‹ï¼Œwsï¼Œwss(ws+tls),over-tls,tcpï¼Œæ”¯æŒ UDP
# vmess ç±»å‹èŠ‚ç‚¹é»˜è®¤å¼€å¯ aeadï¼Œå…³é—­è¯·ç”¨ aead=false
; ws ç±»å‹
;vmess=ws-c.example.com:80, method=chacha20-ietf-poly1305, password= 23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=ws-c.example.com, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, aead=false, tag=Sample-H
; wss(ws+tls) ç±»å‹
;vmess=ws-tls-b.example.com:443, method=chacha20-ietf-poly1305, password= 23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=ws-tls-b.example.com, obfs=wss, obfs-uri=/ws, tls-verification=true,fast-open=false, udp-relay=false, tag=Sample-I
; http ç±»å‹
;vmess=example.com:80, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, server_check_url=http://www.apple.com/generate_204, tag=vmess-http
; tcp ç±»å‹
;vmess=vmess-a.example.com:80, method=aes-128-gcm, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, tag=Sample-J
;vmess=vmess-b.example.com:80, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, tag=Sample-K
; over-tls ç±»å‹
;vmess=vmess-over-tls.example.com:443, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=vmess-over-tls.example.com, obfs=over-tls, tls-verification=true, fast-open=false, udp-relay=false, tag=Sample-L

# http(s) ç±»å‹
;http=http.example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=http
;http=https.example.com:443, username=name, password=pwd, over-tls=true, tls-verification=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=http-tls

# socks5 ç±»å‹èŠ‚ç‚¹
;socks5=example.com:80,fast-open=false, udp-relay=false, tag=socks5-01
;socks5=example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=socks5-02
;socks5=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=socks5-tls-01
;socks5=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls-pubkey-sha256=eb5ec6684564fd0d04975903ed75342d1b9fdc2096ea54b4cf8caf4740f4ae25, fast-open=false, udp-relay=false, tag=socks5-tls-02

# trojan ç±»å‹, æ”¯æŒ over-tls ä»¥åŠ websocketsï¼Œæ”¯æŒ UDP
;trojan=example.com:443, password=pwd, over-tls=true, tls-verification=true, fast-open=false, udp-relay=true, tag=trojan-tls-01
;trojan=example1.com:443, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=trojan-tls-02
;trojan=192.168.1.1:443, password=pwd, obfs=wss, obfs-host=example.com, obfs-uri=/path, udp-relay=true, tag=trojan-wss-05

[filter_local]
# æœ¬åœ°åˆ†æµè§„åˆ™(å¯¹äºå®Œå…¨ç›¸åŒçš„æŸæ¡è§„åˆ™ï¼Œæœ¬åœ°çš„å°†ä¼˜å…ˆç”Ÿæ•ˆ)
# å¦‚å¼€å¯å…¶ä»–è®¾ç½®ä¸­çš„  â€œåˆ†æµåŒ¹é…ä¼˜åŒ–â€ é€‰é¡¹ï¼Œåˆ™åŒ¹é…ä¼˜å…ˆçº§ä¸ºğŸ‘‡

# host > host-suffix > host-keyword(wildcard) > geoip = ip-cidr > user-agennt

# å®Œæ•´åŸŸååŒ¹é…
;host, www.google.com, proxy
# åŸŸåå…³é”®è¯åŒ¹é…
;host-keyword, adsite, reject
# åŸŸååç¼€åŒ¹é…
;host-suffix, googleapis.com, proxy
# åŸŸåé€šé…ç¬¦åŒ¹é…
;host-wildcard, *abc.com, proxy

# User-Agent åŒ¹é…
;user-agent, ?abc*, proxy


# å¼ºåˆ¶åˆ†æµèµ°èœ‚çªç½‘ç»œ
;host-suffix, googleapis.com, proxy, force-cellular
# è®©åˆ†æµèµ°èœ‚çªç½‘ç»œè·Ÿ Wi-Fi ä¸­çš„ä¼˜é€‰ç»“æœ
;host-suffix, googleapis.com, proxy, multi-interface
# è®©åˆ†æµèµ°èœ‚çªç½‘ç»œè·Ÿ Wi-Fi ä¸­çš„è´Ÿè½½å‡è¡¡ï¼Œæä¾›æ›´å¤§å¸¦å®½å‡ºå…¥æ¥å£
;host-suffix, googleapis.com, proxy, multi-interface-balance
# æŒ‡å®šåˆ†æµèµ°ç‰¹å®šç½‘ç»œæ¥å£
;host-suffix, googleapis.com, proxy, via-interface=pdp_ip0

# %TUN% å‚æ•°ï¼Œå›ä¼ ç»™ Quantumult X æ¥å£ï¼Œå¯ç”¨äºæ›²çº¿å®ç°ä»£ç†é“¾åŠŸèƒ½
;host-suffix, example.com, ServerA, via-interface=%TUN%
;ip-cidr, ServerA's IP Range, ServerB
# DNS Leak
host-suffix,astrill.com,PROXY
host-suffix,dnsleaktest.com,PROXY
host-suffix,dnsleak.com,PROXY
host-suffix,expressvpn.com,PROXY
host-suffix,nordvpn.com,PROXY
host-suffix,surfshark.com,PROXY
host-suffix,ipleak.net,PROXY
host-suffix,perfect-privacy.com,PROXY
host-suffix,browserleaks.com,PROXY
host-suffix,browserleaks.org,PROXY
host-suffix,vpnunlimited.com,PROXY
host-suffix,whoer.net,PROXY
host-suffix,whrq.net,PROXY
# å±è”½iosæ›´æ–°
host,mesu.apple.com,reject
host,gdmf.apple.com,reject
host,updates-http.cdn-apple.com,reject
# ip è§„åˆ™
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
# ipv6 è§„åˆ™
;ip6-cidr, 2001:4860:4860::8888/32, direct
# å·²é‡‡ç”¨ ip æ± æ•°æ®ï¼Œå› æ­¤æ³¨é‡Šæ‰ geoip cn
;geoip, netflix, proxy

# 1.0.28 build628 åæ”¯æŒå¦‚ä¸‹çš„geoipåº“å†™æ³•ï¼ˆéœ€ GEO-IP åº“æ”¯æŒï¼‰
;geoip, netflix, proxy

#ä¸åœ¨ä¸Šè¿°è§„åˆ™ä¸­(è¿œç¨‹ä»¥åŠæœ¬åœ°)çš„å‰©ä½™è¯·æ±‚ï¼Œå°†èµ°final æŒ‡å®šçš„èŠ‚ç‚¹/ç­–ç•¥ï¼Œè¿™é‡Œå³æ˜¯ â†’ ğŸ•¹ ç»ˆææ¸…å•, è¯·æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥é€‰æ‹©ç›´è¿æˆ–èŠ‚ç‚¹ã€ç­–ç•¥
#æ­¤ä¸ºå¿…éœ€è§„åˆ™ï¼Œä»…å¯ä¿®æ”¹å¯¹åº”ç­–ç•¥ç»„ï¼Œè¯·å‹¿åˆ é™¤ final
final, ğŸ•¹ ç»ˆææ¸…å•


[rewrite_local]
#æœ¬åœ°å¤å†™è§„åˆ™

#è°·æ­Œé‡å®šå‘
^https?:\/\/(www.)?(g|google)\.cn url 302 https://www.google.com
^https?:\/\/(ditu|maps).google\.cn url 302 https://maps.google.com


[task_local]
# åŒ…å«3âƒ£ï¸ç§ç±»å‹: cron å®šæ—¶ä»»åŠ¡ï¼ŒUIäº¤äº’è„šæœ¬ï¼Œç½‘ç»œåˆ‡æ¢è„šæœ¬

# 1âƒ£ï¸ ä»»åŠ¡æ¨¡å—ï¼Œå¯ç”¨äºç­¾åˆ°,å¤©æ°”è¯è´¹æŸ¥è¯¢ç­‰
# jsæ–‡ä»¶æ”¾äºiCloudæˆ–è€…æœ¬æœºçš„Quantumult X/Scripts è·¯å¾„ä¸‹ã€‚TFç‰ˆæœ¬å¯ç›´æ¥ä½¿ç”¨è¿œç¨‹jsé“¾æ¥
# ä» â€œåˆ†â€ å¼€å§‹çš„5ä½cron å†™æ³•ï¼Œå…·ä½“ cron è¡¨è¾¾å¼å¯è‡ªè¡Œ Google
# æ¯”å¦‚ä¸Šè¿°è¯­å¥ ä»£è¡¨æ¯å¤© 12 ç‚¹ 2 åˆ†ï¼Œè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡;
# tagå‚æ•°ä¸º task å‘½åæ ‡è¯†;
;img-urlå‚æ•°ç”¨äºæŒ‡å®š task çš„å›¾æ ‡(108*108)

2 12 * * * sample.js, tag=æœ¬åœ°ç¤ºèŒƒ(å·¦æ»‘ç¼–è¾‘ï¼Œå³æ»‘æ‰§è¡Œ), enabled=false, img-url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/quantumult-x.png
13 12 * * * https://raw.githubusercontent.com/crossutility/Quantumult-X/master/sample-task.js, tag=è¿œç¨‹ç¤ºèŒƒ(ç‚¹å‡»ç¼“å­˜/æ›´æ–°è„šæœ¬), enabled=false, img-url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/quantumult-x.png

# 2âƒ£ï¸ UIäº¤äº’æŸ¥è¯¢è„šæœ¬ç¤ºèŒƒï¼Œåœ¨é¦–é¡µé•¿æŒ‰ èŠ‚ç‚¹/ç­–ç•¥ç»„ å”¤å‡º
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag = æµåª’ä½“ - è§£é”æŸ¥è¯¢, img-url=checkmark.seal.system, enabled=true

# 3âƒ£ï¸ ç½‘ç»œåˆ‡æ¢/å˜åŒ–æ—¶ è§¦å‘çš„è„šæœ¬ç±»å‹
;event-network sample-taks.js


[http_backend]
#
# Deploy a local HTTP server and use JavaScript for data processing.
# If the require-devices is set, this line of configuration will only be loaded when current Quantumult device ID belongs to the require-devices. The Quantumult device ID can be found in "Settings - Misc Settings - About".
# The input variables are $reqeust.url, $reqeust.path, $reqeust.headers, $reqeust.body
# The output using $done like $done({status:"HTTP/1.1 200 OK"}, headers:{}, body:"here is a string") to sendback the response.
# Further more you can use a signature or any other validation method to verify if the request is legitimate.
# After the deployment you should visit it through http://127.0.0.1:9999/your-path/your-api/.
#

;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/sample-backend.js, tag=fileConverter, path=^/example/v1/
;preference.js, tag=userPreference, path=^/preference/v1/, img-url=https://example.com, enabled=true
;sample.js, tag=sample, path=^/sample/v1/, require-devices=ID1, ID2, enabled=true
;convert.js, tag=fileConverter, path=^/convert/v1/


[mitm]
#ä»¥ä¸‹ä¸ºè¯ä¹¦&ä¸»æœºåéƒ¨åˆ†

# è¯·è‡ªè¡Œåœ¨ APP çš„UIä¸­ ç”Ÿæˆè¯ä¹¦ å¹¶å®‰è£…&ä¿¡ä»»ï¼ˆğŸ’¡è¯·æŒ‰ç¡®ä¿ç…§æ–‡å­—æç¤ºæ“ä½œğŸ’¡ï¼‰
# ä»¥ä¸‹ä¸ºè¯ä¹¦å‚æ•°ï¼Œå¯å»UIç•Œé¢è‡ªè¡Œç”Ÿæˆå¹¶å®‰è£…è¯ä¹¦ï¼Œä¼šåœ¨æ­¤ç”Ÿæˆå¯¹åº”ä¿¡æ¯
;passphrase = 
;p12 = 

# è·³è¿‡éªŒè¯è¯ä¹¦
;skip_validating_cert = false
# å¼ºåˆ¶SNIåŸŸå
;force_sni_domain_name = false

# å½“ä½¿ç”¨ Quantumult X åœ¨ M èŠ¯ç‰‡çš„ Mac è®¾å¤‡ä¸Šä½œä¸ºå±€åŸŸç½‘ç½‘å…³æ—¶ï¼Œä½¿ç”¨ä¸‹é¢çš„å‚æ•°æ¥ è·³è¿‡æŸäº›ç‰¹å®šè®¾å¤‡çš„ mitm éœ€æ±‚
;skip_src_ip = 192.168.4.50, 92.168.4.51

# å½“å¤šä¸ªä¸åŒçš„ TCP è¿æ¥ï¼ˆéåŸŸåç±»è¯·æ±‚ï¼‰çš„ç›®æ ‡ IP ä¸åŒï¼Œä½†è¿™äº›è¿æ¥çš„ TSL æ¡æ‰‹ SNI å­—æ®µç›¸åŒæ—¶ï¼Œå¦‚éœ€è·³è¿‡å…¶ä¸­æŸäº›è¿æ¥çš„ MitM hostname åŒ¹é…è¿‡ç¨‹ï¼Œå¯ä½¿ç”¨ğŸ‘‡å‚æ•°ã€‚
;skip_dst_ip = 123.44.55.4

;hostname ä¸ºä¸»æœºåï¼Œç”¨,åˆ†éš”å¤šä¸ª
;hostname = *.example.com, *.sample.com
hostname = www.google.cn